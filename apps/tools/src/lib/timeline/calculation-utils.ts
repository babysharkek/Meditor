import type { TimelineTrack } from "@/types/timeline";

export function calculateTotalDuration({
  tracks,
}: {
  tracks: TimelineTrack[];
}): number {
  if (tracks.length === 0) return 0;

  const trackEndTimes = tracks.map((track) =>
    track.elements.reduce((maxEnd, element) => {
      const elementEnd =
        element.startTime +
        element.duration -
        element.trimStart -
        element.trimEnd;
      return Math.max(maxEnd, elementEnd);
    }, 0),
  );

  return Math.max(...trackEndTimes, 0);
}
